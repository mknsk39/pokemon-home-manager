# 画面構成

## ルーティングと認証フロー

全画面に対してグローバルミドルウェア (`middleware/auth.global.ts`) が適用される。

| 条件 | 遷移先 |
| --- | --- |
| 未認証ユーザーが `/auth` 以外にアクセス | `/auth` へリダイレクト |
| 認証済みユーザーが `/auth` にアクセス | `/` へリダイレクト |

### 認証フロー

```
初回アクセス
  │
  ├─ 未認証 ──→ /auth（認証画面）
  │                │
  │                ├─ Google ログイン成功 ──→ /（ホーム）
  │                └─ ログイン失敗 ──→ エラー表示（画面遷移なし）
  │
  └─ 認証済み ──→ /（ホーム）

ログアウト（ヘッダーメニュー）
  └─ /auth へ遷移
```

---

## 画面一覧

### 認証画面 (`/auth`)

- パス: `/auth`
- レイアウト: ヘッダーなし
- Google ログインボタンを中央に配置
- ログイン中はローディング状態を表示
- 失敗時はエラーメッセージを表示
- ログイン成功後、自動的に `/` へ遷移

### ホーム画面 / ポケモン一覧 (`/`)

- パス: `/`
- レイアウト: 共通ヘッダーあり
- コンポーネント: `PokemonListView` (Organism)

#### 一覧表示

- マスターデータから全ポケモン種族を取得し、グリッド形式でカード表示
- 各カードにはポケボールアイコン、図鑑No、ポケモン名を表示
- グリッドは `minmax(168px, 1fr)` のレスポンシブ対応（名前最大6文字を考慮）

#### 無限スクロール

- `BaseInfiniteScroll`（`v-infinite-scroll` ラッパー）を使用
- 初期表示は 50 件、スクロールで 50 件ずつ追加読み込み
- 全件表示完了後はローディングを終了

#### スクロールトップボタン

- 画面を 200px 以上スクロールすると、右下に FAB（丸型ボタン）が出現
- ボタン押下でスムーズにページ先頭へ戻る
- フェードイン/アウトのトランジション付き
- ロジックは `useScrollToTop` Composable に分離

#### 将来拡張（未実装）

- 高速なインクリメンタルサーチ（名前、図鑑No）
- フィルタ：所持/未所持/全て、ソフト別、姿違いのみ
- グリッド/リスト表示の切り替え

### ダッシュボード (Rotom Analytics) ※未実装

- HOME 図鑑全体の達成率（％）をドーナツチャートで表示
- ソフト別達成率をプログレスバーで一覧表示
- 「Rotom Report（SNS 共有用画像）」の生成機能

---

## 共通レイアウト

### 共通ヘッダー

- 認証画面（`/auth`）では非表示
- ブランドアイコン + アプリ名を左側に表示
- 認証済みの場合、右側にユーザーメニューを表示
  - アバター画像（未設定時はフォールバックアイコン）
  - メニュー内にログアウトボタン
